<app-header
  title="Registration details"
  [showHome]="true"
></app-header>
<app-program-navigation></app-program-navigation>
<ion-content class="ion-padding">
  <ion-spinner
    color="primary"
    *ngIf="loading"
  ></ion-spinner>
  <ng-container *ngIf="!loading">
    <ion-text *ngIf="!person">
      {{ 'registration-details.error' | translate}}
    </ion-text>
    <ion-grid *ngIf="person">
      <ion-row>
        <ion-col
          [size]="12"
          [sizeMd]="5"
          [sizeLg]="4"
        >
          <app-registration-personal-information
            [person]="person"
            [programId]="programId"
          ></app-registration-personal-information>

          <app-registration-payment-overview
            [person]="person"
            [program]="program"
          ></app-registration-payment-overview>
        </ion-col>
        <ion-col
          [size]="12"
          [sizeMd]="7"
          [sizeLg]="8"
        >
          <ion-text>
            <h1>
              {{ 'registration-details.activity-overview.title' | translate }}
            </h1>
          </ion-text>

          <ion-card>
            <ion-item
              color="light"
              lines="none"
            >
              <ion-row>
                <ion-button
                  *ngFor="let filter of activityOverviewButtons"
                  (click)="activityOverviewFilter = filter"
                  fill="clear"
                  size="small"
                  [color]="activityOverviewFilter === filter ? 'primary' : 'secondary'"
                  [style]="activityOverviewFilter === filter ? 'box-shadow: 0px 2px var(--ion-color-primary); --ripple-color: #fff' : '--ripple-color: #fff'"
                >
                  {{ ('registration-details.activity-overview.filterButton.' +
                  filter | translate) + ' (' + getFilterCount(filter) + ")" }}
                </ion-button>
              </ion-row>
            </ion-item>
            <ion-card-content class="ion-no-padding">
              <ion-list
                class="ion-no-padding"
                lines="full"
              >
                <ion-item
                  *ngFor="let item of getFilteredActivityOverview()"
                  style="font-size: 14px; --padding-start: 0"
                >
                  <ion-grid>
                    <ion-row>
                      <ion-col size="1">
                        <div
                          style="
                            height: 100%;
                            display: flex;
                            align-items: center;
                          "
                        >
                          <ion-icon
                            [name]="getIconName(item.type)"
                            size="large"
                          ></ion-icon>
                        </div>
                      </ion-col>
                      <ion-col size="11">
                        <ion-row class="ion-justify-content-between">
                          <ion-row class="ion-margin-bottom">
                            <ion-label class="ion-margin-end"
                              ><strong
                                >{{item.label | uppercase}}</strong
                              ></ion-label
                            >
                            <ion-note
                              ><small>
                                {{ item.date | date: 'dd-MM-yyyy HH:mm' }}
                              </small>
                            </ion-note>
                          </ion-row>
                        </ion-row>
                        <div>
                          <ion-text class="ion-text-end"
                            >{{ item.description }}</ion-text
                          >
                        </div>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-item>
              </ion-list>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ng-container>
</ion-content>
