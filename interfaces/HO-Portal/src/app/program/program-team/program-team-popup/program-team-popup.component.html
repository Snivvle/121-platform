<ion-header>
  <ion-toolbar>
    <!-- Pop up title -->
    <ion-title>
      {{ 'page.program-team.popup.title' | translate }}
    </ion-title>

    <!-- Exit cancel button -->
    <ion-buttons slot="end">
      <ion-button
        (click)="closeModal()"
        [attr.title]="'common.cancel' | translate"
        [attr.aria-label]="'common.cancel' | translate"
      >
        <ion-icon
          name="close"
          slot="icon-only"
          aria-hidden="true"
        ></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<!-- content -->

<ion-content class="ion-padding">
  <form (ngSubmit)="assignTeamMember()">
    <ion-grid class="ion-no-margin ion-padding">
      <ion-row>
        <ion-label class="label">{{
          'page.program-team.popup.team-member' | translate
        }}</ion-label>
      </ion-row>
      <ion-row>
        <ion-searchbar
          id="searchbar"
          [(ngModel)]="searchQuery"
          (ionInput)="search($event)"
          [debounce]="1000"
          placeholder="{{
            'page.program-team.popup.team-member-placeholder' | translate
          }}"
          search-icon="'undefined'"
        >
        </ion-searchbar>
        <ng-container *ngIf="showSearchResults">
          <ion-list>
            <ion-item
              [button]="true"
              *ngFor="let user of searchResults"
              (click)="updateSearchbarValue(user.user_username, user.user_id)"
            >
              {{ user.user_username }}
            </ion-item>
          </ion-list>
        </ng-container>
      </ion-row>
      <ion-row>
        <ion-label class="label">{{
          'page.program-team.popup.role' | translate
        }}</ion-label>
      </ion-row>
      <ion-row>
        <ion-select
          placeholder="{{
            'page.program-team.popup.roles-placeholder' | translate
          }}"
          label-placement="start"
          fill="outline"
          toggleIcon="chevron-down-outline"
          [multiple]="true"
          interface="popover"
          [interfaceOptions]="{ cssClass: 'rolesDropdown' }"
        >
          <ion-select-option
            *ngFor="let role of rolesList"
            value="{{ role.role }}"
          >
            {{ role.label.trim() }}
          </ion-select-option>
        </ion-select>
      </ion-row>
    </ion-grid>
    <div class="buttons">
      <!-- cancel button -->
      <ion-button
        (click)="closeModal()"
        [attr.title]="'common.cancel' | translate"
        [attr.aria-label]="'common.cancel' | translate"
        fill="clear"
      >
        <u
          ><strong>{{
            'page.program-team.popup.cancel-button' | translate
          }}</strong></u
        >
      </ion-button>

      <!-- add user button -->
      <ion-button
        type="submit"
        shape="round"
        fill="solid"
        class="button"
        item-end
        [disabled]="this.addButtonDisabled"
        >{{
          'page.program-team.popup.add-users-button' | translate
        }}</ion-button
      >
    </div>
  </form>
</ion-content>
