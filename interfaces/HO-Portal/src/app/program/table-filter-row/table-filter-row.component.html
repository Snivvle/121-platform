<div
  [ngClass]="{
    'tfr--create-filters layout-flex-row ion-align-items-center ion-justify-content-between ion-margin-vertical': true,
    'is-loading': isLoading
  }"
>
  <div
    class="layout-flex-row ion-align-items-center"
    style="width: 50%"
  >
    <ion-icon
      name="funnel"
      color="black"
      aria-hidden="true"
      class="ion-margin-horizontal"
    ></ion-icon>

    <app-select-typeahead
      [items]="tableFiltersPerColumn"
      [(selection)]="textFilterOption"
      [placeholder]="
        'page.program.table-filter-row.select-column-to-filter' | translate
      "
      [multiple]="false"
      [disabled]="isLoading"
      class="tfr--text-filter--select ion-margin-end"
    ></app-select-typeahead>

    <ng-container *ngIf="showInput()">
      <ion-input
        [placeholder]="
          'page.program.program-people-affected.filter-placeholder' | translate
        "
        [attr.title]="
          'page.program.program-people-affected.filter-placeholder' | translate
        "
        [attr.aria-label]="
          'page.program.program-people-affected.filter-placeholder' | translate
        "
        [(ngModel)]="filterRowsVisibleQuery"
        [disabled]="isLoading"
        [clearInput]="true"
        (keyup.enter)="applyFilter()"
        class="tfr--text-filter--input"
      >
      </ion-input>

      <ion-button
        fill="outline"
        [disabled]="disableApplyButton()"
        (click)="applyFilter()"
      >
        {{ 'page.program.table-filter-row.apply-filter' | translate }}
      </ion-button>
    </ng-container>
  </div>
  <div class="layout-flex-row ion-align-items-center">
    <ion-label class="ion-margin-start">
      {{
        'page.program.program-people-affected.filter-btn.common.filter-by'
          | translate
      }}
    </ion-label>
    <app-status-table-filter
      *ngIf="programId"
      [programId]="programId"
      [thisPhase]="thisPhase"
    ></app-status-table-filter>
  </div>
</div>

<div
  [ngClass]="{
    'tfr--active-filters layout-flex-row ion-align-items-center ion-margin-vertical': true,
    'is-loading': isLoading
  }"
>
  <ion-chip
    *ngFor="let filter of textFilter | async"
    size="small"
  >
    <ion-label>
      {{ filter.label }}:
      <strong>{{ filter.value }}</strong>
    </ion-label>

    <ion-button
      fill="clear"
      size="small"
      color="medium"
      class="ion-no-margin ion-no-padding"
      (click)="removeTextFilter(filter.name)"
      [attr.aria-label]="
        'page.program.table-filter-row.remove-filter' | translate
      "
      [attr.title]="'page.program.table-filter-row.remove-filter' | translate"
    >
      <ion-icon
        name="close"
        size="small"
        slot="icon-only"
        aria-hidden="true"
      ></ion-icon>
    </ion-button>
  </ion-chip>
  <ng-container *ngIf="(textFilter | async).length > 0">
    <div class="ml-auto">
      <ion-chip (click)="clearAllFilters()">
        <ion-label>
          {{ 'page.program.table-filter-row.clear-all' | translate }}
        </ion-label>
      </ion-chip>
    </div>
  </ng-container>
</div>
