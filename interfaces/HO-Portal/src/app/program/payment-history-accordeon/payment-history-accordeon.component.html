<!-- Accordion -->
<ion-accordion>
  <ion-item slot="header">
    <ion-grid class="ion-justify-content-start">
      <ion-row class="accordion-label">
        <!-- Money Icon -->
        <ion-icon
          class="money-icon"
          name="cash-outline"
        ></ion-icon>

        <!-- Transfer index -->
        <ion-text class="transfer"
          >Transfer #{{ paymentRowData.paymentIndex }}
        </ion-text>

        <!-- Transfer status -->
        <ng-container>
          <ion-chip
            *ngIf="paymentRowData.transaction?.status"
            [class.success]="paymentRowData.transaction?.status === 'success'"
            [class.failed]="paymentRowData.transaction?.status === 'error'"
            [class.waiting]="paymentRowData.transaction?.status === 'waiting'"
          >
            <ion-label>
              {{
                'page.program.program-payout.last-payment.' +
                  paymentRowData.transaction?.status | translate
              }}
            </ion-label>
          </ion-chip>

          <!-- Single payment Transfer status -->
          <ion-chip
            *ngIf="enableSinglePaymentData(paymentRowData)"
            [ngClass]="'waiting'"
          >
            <ion-label>
              {{
                'page.program.program-people-affected.transaction.not-yet-sent'
                  | translate
              }}
            </ion-label>
          </ion-chip>
        </ng-container>

        <!-- Open voucher button -->
        <ng-container>
          <ion-button
            class="open-voucher-button"
            fill="clear"
            size="small"
            *ngIf="
              paymentRowData.transaction &&
              voucherSupportData(paymentRowData.transaction.fsp)
            "
            (click)="rowClick(paymentRow)"
            >{{
              'page.program.program-people-affected.transaction.open-voucher'
                | translate
            }}
          </ion-button>
        </ng-container>

        <!-- Retry payment button -->
        <ng-container>
          <ion-button
            class="send-payment-button"
            shape="round"
            fill="outline"
            size="small"
            *ngIf="
              hasErrorData(paymentRowData) && !hasWaitingData(paymentRowData)
            "
            (click)="rowClick(paymentRowData)"
          >
            {{
              'page.program.program-people-affected.transaction.retry'
                | translate
            }}
          </ion-button>
        </ng-container>

        <!-- Single payment send again button -->
        <ng-container>
          <ion-button
            class="send-payment-button"
            shape="round"
            fill="outline"
            size="small"
            *ngIf="enableSinglePaymentData(paymentRowData)"
            (click)="rowClick(paymentRowData)"
          >
            {{
              'page.program.program-people-affected.transaction.send-payment'
                | translate
            }}
          </ion-button>
        </ng-container>
      </ion-row>

      <!-- Transaction Date -->
      <ion-row class="accordion-label-two">
        <ion-text
          class="date"
          *ngIf="!enableSinglePaymentData(paymentRowData)"
        >
          {{ displayTransactionDateOnlyData(paymentRowData.sentDate) }}
        </ion-text>
      </ion-row>
    </ion-grid>
    <ion-icon
      name="chevron-down-outline"
      class="ion-accordion-toggle-icon"
      size="small"
    >
    </ion-icon>
  </ion-item>

  <!-- Accordion content -->
  <div slot="content">
    <ion-grid>
      <ion-row>
        <ion-col size="6">
          <ion-list>
            <!-- sent -->
            <ion-item>
              <ion-label class="accordion-text text-bold"
                >{{
                  'page.program.program-people-affected.transaction.sent'
                    | translate
                }}:
              </ion-label>
              <ion-label
                class="accordion-text ion-text-right"
                *ngIf="paymentRowData.transaction"
                [title]="
                  displayTransactionDateTimeData(paymentRowData.sentDate)
                "
                >{{ displayTransactionDateTimeData(paymentRowData.sentDate) }}
              </ion-label>
            </ion-item>

            <!-- amount -->
            <ion-item>
              <ion-label class="accordion-text text-bold"
                >{{
                  'page.program.program-people-affected.transaction.amount'
                    | translate
                }}:
              </ion-label>
              <ion-label
                class="accordion-text ion-text-right"
                *ngIf="paymentRowData.transaction?.status"
                >{{ paymentRowData.amount }}
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-col>
        <ion-col size="6">
          <ion-list>
            <!-- fsp -->
            <ion-item>
              <ion-label class="accordion-text text-bold"
                >{{
                  'page.program.program-people-affected.transaction.fsp'
                    | translate
                }}:
              </ion-label>
              <app-tooltip
                [value]="paymentRowData.transaction?.fspName"
              ></app-tooltip>
              <ion-label
                id="hover-trigger"
                class="accordion-text ion-text-right"
                *ngIf="paymentRowData.transaction?.status"
              >
                {{ paymentRowData.transaction?.fspName }}
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-accordion>
